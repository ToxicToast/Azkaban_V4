name: Renovate

on:
    push:
        branches: [renovate/**/*, renovate/*]

env:
    NX_BRANCH: ${GITHUB_REF##*/}
    NODE_VERSION: 21
    MAX_PARALLEL: 3

jobs:
    Renovate:
        runs-on: ubuntu-24.04

        steps:
            - uses: actions/checkout@v4
              with:
                  fetch-depth: 0

            - uses: nrwl/nx-set-shas@v4

            - name: ðŸ“¦ Setup Node.js
              uses: actions/setup-node@v4
              with:
                  node-version: ${{ env.NODE_VERSION }}

            - name: ðŸ“¦ Install dependencies
              run: npm install

            - name: ðŸ“¦ Install NX-Linux
              run: npm install @nx/nx-linux-x64-gnu@latest

            - name: ðŸš€ Build Apps
              run: npx nx affected:build --parallel --maxParallel=${{ env.MAX_PARALLEL }}
